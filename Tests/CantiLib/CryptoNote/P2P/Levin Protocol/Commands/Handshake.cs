using Canti.Data;
using System;
using System.Collections.Generic;

namespace Canti.CryptoNote.P2P.Commands
{
    internal class CommandHandshake
    {
        // Command ID
        internal const int Id = GlobalsConfig.LEVIN_COMMANDS_BASE + 1;

        // Outgoing request structure
        internal struct Request : ICommandRequestBase
        {
            // Variables
            internal NodeData NodeData { get; set; }
            internal CoreSyncData PayloadData { get; set; }

            // Serializes request data into a byte array
            public byte[] Serialize()
            {
                // Create a portable storage
                PortableStorage Storage = new PortableStorage();

                // Add entries
                Storage.AddEntry("node_data", NodeData);
                Storage.AddEntry("payload_data", PayloadData);

                // Return serialized byte array
                return Storage.Serialize();
            }
        }

        // Incoming response structure
        internal struct Response : ICommandResponseBase<Response>
        {
            // Variables
            internal NodeData NodeData { get; set; }
            internal CoreSyncData PayloadData { get; set; }
            internal PeerlistEntry[] LocalPeerlistNew { get; set; }

            // Serializes response data
            public byte[] Serialize()
            {
                // Create a portable storage
                PortableStorage Storage = new PortableStorage();

                // Add entries
                if (!Storage.AddEntry("node_data", NodeData)) Console.WriteLine("Failed to add basic_node_data");
                if (!Storage.AddEntry("payload_data", PayloadData)) Console.WriteLine("Failed to add core_sync_data");
                if (!Storage.AddEntry("local_peerlist", "0a815ea7632f89792e000068eddb41958e6fc79b46445b00000000a7630044792e00003bda3d613ec28c4d9b46445b00000000c6c7420e792e00003daaee7c731aa99b9a46445b00000000a5e3c24c792e0000183725cc40fa95679a46445b00000000b637c806792e00004605f6f1d9e70c769946445b00000000704e0a2b792e0000297d638bdffc3281deac435b000000004fb27e32792e00001b6f6500f8dc368dd9ac435b0000000049ecae96792e0000fd2c5c97d651828dc3ac435b00000000acf92abe792e00000b54605a358530d2c2ac435b000000005f135443792e00002b3e49882f416a84c0ac435b00000000a763a996792e000048d0e9a2002cc2acbfac435b00000000a763675d792e00008c2afa96c566bd28bdac435b000000009f4183b6792e000063b8e94e05a9664b48ac435b00000000ae8a448d792e00003b2084f2ce41086892ab435b00000000a2dad3e9792e0000bf4db1ed1f679de2ad4c435b000000009f4183de792e000085e82163f6a5a8f95e22435b00000000a7636561792e0000ddc6cba6a73655915e22435b00000000a763204b792e0000a0de080d647157995e22435b000000005606bb18792e0000a77e84e8b61a4167381e435b00000000a5e3c754792e000054929947a1a28423f01d435b000000005c2d70b9792e000099b6f1910a401ba30919435b000000002eb9ae9e792e000075bb7627422f97f40b18435b00000000adfec0cd792e00008ad1c7a3e80f90a1c317435b00000000a2d00b60792e00000d56bb47703ad4000d17435b00000000a7632fae792e000056093be9a3b9a0561f13435b00000000d813bb06792e00009d0f44781d2e0cbf6a08435b000000009f41899c792e000001d34b52ef2ee6617807435b00000000aaf5e231792e00004af13a2e49761335f0fc425b000000005add1113792e0000ba1d91a883ed73edcf5c425b0000000056a1f8f4792e0000530ac12baf49a88c53a6415b0000000044be9980792e00006c57df784845a12d53a6415b000000005f69e5e8792e0000988d09b6d79d0c764fa6415b00000000b8a76848792e0000885c953fd5a47b4b4da6415b00000000276d9191792e00004605f6f1d9e70c7657a4415b000000006b02ff92792e00000e9417ba31f8bee637a4415b00000000dc8d7b8a792e0000c9352026e9e28fcff195415b00000000481260c8792e00007f3dbfe114c994973695415b0000000058cf6b4e792e00003bca55e19000a0401b8a415b0000000076d270be792e0000932afd6321bca24e6a86415b0000000050d81be7792e0000d8eb8f11b7fac6a2f784415b00000000603a5e3d792e00002601a5922e278ec02280415b00000000bd306ebe792e0000d65d14246b8fb7731b7c415b000000004cbb9b55792e0000e1b97cc9facd5ae85074415b000000002fcbfcbe792e0000c2a0f2ab2415bfc74d5a415b00000000c99c90b4792e0000f1bd07b5137321569e55415b0000000063aaa686792e00003dac73f66708068adb14415b0000000048126cdb792e00007f3dbfe114c99497740a415b0000000049fb1d38792e0000251687e7c178c87fd009415b0000000058cf68ba792e00003bca55e19000a040038f405b00000000cfb4c037792e0000f7946021281c44a0018f405b00000000722b87ee792e0000661843e9a0dc54e88b8b405b000000002e7613a3792e00003bea8db745da3e0b0285405b000000006d96bb93792e000013268d7a3590c333d27c405b000000003ab37689792e0000e57abbef8b50b045047c405b00000000dc8d832f792e0000c9352026e9e28fcf2c77405b0000000055da0521792e0000f92116baf78878ce996a405b0000000043aef5c9792e0000bb5f089de2407b832e63405b00000000bae78db6792e00009ae9d1a4a6ec1a14460a405b00000000bdfae5be792e0000b212ac930e1f3eedfaf83f5b000000002e3f592b792e00004b2664e24b05ad8814eb3f5b00000000de610b7c792e000087e6832a14f923b96ccf3f5b000000002e298651792e0000e54803dd811de1a92ca53f5b00000000babc3ca4792e00005f78e198654c42a1599d3f5b00000000ae128d64792e00008f8d74dee3cd58366c993f5b00000000971cf326792e0000ce492bf5c514e4c535963f5b00000000474f855f792e00001918b088dcd0a6cebf923f5b0000000001a033e7792e0000661843e9a0dc54e8f9903f5b00000000b280a33c792e0000b421a7514d41631aed8d3f5b000000003de60131792e0000661843e9a0dc54e83f8d3f5b0000000024e2437c792e0000661843e9a0dc54e8d38b3f5b000000005efab998792e000012a013d6c4e403e9de8a3f5b00000000c60ec515792e0000fce1e08f4a14948b89143f5b0000000059d466e7792e00000ab5ce728cd28d9b39143f5b00000000c6354fa8792e0000a49a8d31e72c8dec4a133f5b000000005ebe0de0792e00005b30e2139c1338d0fc123f5b000000004ab1241f792e0000a60a87ed9464472984f63e5b0000000048126c53792e00007f3dbfe114c9949791ea3e5b00000000481265c2792e00007f3dbfe114c9949712993e5b0000000043a761cc792e00000ed6e4e22c6f5a8107953e5b00000000a80007b7792e00005781d20c498094fb8c893e5b00000000053ac351792e000002e17d0823e4ee6d51763e5b0000000044c23a4c792e0000adfef80bc98b1b2db1713e5b000000002f21898d792e000056a3bfa4d05b757d61713e5b00000000bfd95b46792e00000e2ae4cc0a83cecb2a6f3e5b00000000450e2520792e000084b992e82806c6b2b46b3e5b0000000044306dd3792e00000db48a464e294c3bb2663e5b0000000047c7486a792e000041dbab23405fff54c9043e5b00000000784eb2ce792e00003e4b66e8da791cefc8043e5b00000000560b8b23792e0000f2d8476c2790e72d35033e5b000000006d33abf3792e0000af01ab0234bb61fe33ef3d5b00000000579b1a14792e00002fbc5666f203100b60ea3d5b000000004f7e30f0792e00003c9ae20b92475d9c92e73d5b000000001b035603792e0000249d1bd8c61248107ce63d5b000000006b178217792e000018576439a615e14990e43d5b000000007bcfad57792e00007d9fb1f222c8171943dd3d5b000000004e842873792e0000ad9bee882ce57da01e993d5b00000000252ef154792e000044c19bd894fcfb5ffe9a3c5b00000000dc8d7f7c792e0000c9352026e9e28fcf149a3c5b000000005bb68175792e000006498500e79f9f61cc953c5b000000001837e7ac792e00005583b353ba88c53a9e8d3c5b000000006eafb63c792e0000f4dd0d6dab445741678d3c5b00000000bae79101792e00009ae9d1a4a6ec1a1469463c5b0000000049ffd3ca792e0000b40ef9fd5c9e901913353c5b000000005fb393b1792e0000f937c50a212737e7af113c5b00000000bba18a3b792e000039744d71f62df6b966073c5b00000000dc7ba35f792e000038faddd21bbe0b8541073c5b00000000b1b11853792e0000d65d14246b8fb773d9053c5b000000008de1a2b9792e0000d2a9c274ee1156573f053c5b00000000bc736d2c792e0000e5d02d0ea4c95fe106f63b5b0000000079641803792e00006e6fec9001d09c6072f33b5b00000000bb047b9d792e00004626d1ce15cbdda08ded3b5b000000006016f308792e0000522970bb86a99b8afde83b5b0000000046451f9b792e00008b438c4b13cdddec36cb3b5b00000000d4114b4a792e00005f59a51d9deb094b0dc63b5b0000000055d3deaf792e0000439410f4832fad5d12c03b5b00000000a100f654792e000016a753606eb60a34d9ba3b5b0000000074342934792e0000b581999afdbd331a11af3b5b0000000001a9469f792e000024c45fae65e67633624f3b5b00000000b6f51f71792e000030f71c573646e303bc4c3b5b000000005afda797792e000021855a406661f7f1a6413b5b00000000518daba1792e0000530ac12baf49a88ca13d3b5b000000005072d8ff792e0000cd4c3dee73b10633ee283b5b00000000dc8d7996792e0000c9352026e9e28fcfc5153b5b0000000018ba5c6e792e0000b12ecc9929a2a51a9b133b5b000000001bfd5ece792e000068d54f4d751a734960043b5b000000000259ad95792e0000e2bc98c4a908b86d3be43a5b00000000deacda2d792e000030f71c573646e30399da3a5b0000000053d519de792e0000f67d72cc6fb6c9cf00183a5b00000000449761a7792e0000dc3fea1243c49ff7f1173a5b00000000567bf060792e00008f46d8185dc5fa2b7e163a5b00000000b194e8c6792e00009ae9d1a4a6ec1a14b5143a5b000000005b6ac362792e0000f04d31c1862c11a77b143a5b0000000024e42838792e0000c9352026e9e28fcff6123a5b00000000027db2d8792e0000980ce37c5912d90ac2103a5b00000000bc736866792e0000e5d02d0ea4c95fe1180e3a5b00000000c0de9dac792e00007cdee3c06f242bf88a093a5b0000000052275585792e00003d804af346e20a1ebbfa395b000000005fec3e52792e0000a6b4c794d7fc444016f1395b00000000abe731b0792e0000e4bf0177a4af43e831eb395b0000000049657025792e00002f9975739e0a644793d1395b0000000049a27b7e792e0000fcd85eeb66b09fb5bdc1395b000000003b15df3c792e000022cdf1a8e0e1fd4fccbc395b000000005063123e792e0000e39d51bf04d7e44d91b6395b00000000771203db792e0000d7265119e410ba39ddaf395b00000000025884ed792e0000e2bc98c4a908b86dbeae395b0000000088f30657792e0000d90b1af9b3365437f839395b00000000b16341da792e000060a5b4916ccd9e33dd39395b00000000805a4996792e0000a5cd1619fc6fd5fb1938395b000000004b429fe6792e00004047347d069594c10037395b00000000b296fbef792e0000ff09a38ac05b1ff41335395b000000000222ecfb792e0000f43d306cb9a63dde5e18395b000000004e94122d792e0000186aa92e860ba152d317395b000000006d831f17792e0000fbe067d9a577251c9313395b00000000560a8fcd792e0000bddb4cecb977e46bffb1385b00000000790208e9792e0000da0ccbc0628a7202706a385b000000002a626050792e0000518f2d974958e164ba5e385b0000000018fc53eb792e000017586193ffe384553d53385b00000000abe70a2b792e0000e4bf0177a4af43e8d840385b000000000259970c792e0000e2bc98c4a908b86da030385b000000001817f01a792e0000fd0a09a9bba6d2e35430385b000000006d86547c792e00003ca139600f2d8f972629385b000000004d37de3f792e00007c516ae97551c18556df375b0000000047d44f11792e000001d0d75c5d58523232df375b000000002e62ce54792e000080f8a3285d65265d2fdf375b00000000b157ab3a792e0000b4e8fd1a07b426c3afde375b00000000021d8086792e00003af3b7a863c8088fb4d8375b00000000bfdfeca2792e00004626d1ce15cbdda0f5d4375b000000004ede7e52792e0000280b266465ed703a42d4375b00000000b09b5811792e00003c49ff6ebfd85fa4e2be375b000000008ba21291792e00005c2876325299e1c08db8375b00000000bdba860f792e000016fea287ebc5a9b3d734375b000000008bc35377792e000037ab9598808b97b8d634375b00000000ae2d5611792e0000c00ac9826c8a34b0d634375b000000005245510e792e0000869bac8ae11b22dfc233375b000000001b64141d792e0000a5cd1619fc6fd5fb2033375b000000009e8cd3bc792e0000175e5e3db854e484fa32375b000000004d7886c7792e000032a8c42e31c941fcd432375b000000005e708ebd792e000044c2668daa62d36bd82e375b00000000bb350750792e00004626d1ce15cbdda0262e375b00000000bb35bf11792e00004626d1ce15cbdda07329375b000000006839bd21792e0000aee33cf41f5468c70a29375b00000000775eff8f792e0000d7f5581163dbd06eca24375b000000003ab69220792e00004605f6f1d9e70c767f23375b000000004e84532f792e0000ad9bee882ce57da02b1f375b000000005bda6994792e000021bda527710a156f3c1e375b00000000181b28d0792e00001584afc3296e91126718375b00000000c35bea52792e000013bc8e9d70a544a9e406375b000000006f5f2aaa792e00005f2ae3b4fa950599a901375b00000000bb3507d9792e00004626d1ce15cbdda085fe365b00000000bb047b99792e00004626d1ce15cbdda044f9365b00000000440d181c792e000046f7271c1d9563cd0bf5365b00000000b337f17f792e00004e196fbe0e86950b75f3365b00000000bd0bea87792e00004626d1ce15cbdda019f0365b000000004b49bad8792e0000e52d4dd650ca6ea084eb365b0000000001ee66b9792e00009339da38d23a6a1ce3e9365b00000000b33731ab792e0000507d8923693a72d544e7365b000000004573980d792e00002b9fb0ba6611d9317cdf365b0000000043d22044792e000078e4e2345c0c2aa565df365b00000000bb6b2b26792e0000b84031638417afe40adf365b00000000b3ffbc7a792e00004626d1ce15cbdda03dd6365b00000000bb156a29792e0000d688218f2bace55bd3d5365b000000006a479763792e00008e0b3fe92692392d85d3365b00000000bd48b5c8792e00004626d1ce15cbdda05ed3365b00000000724db1ab792e0000191234f0569ee6e4c0d2365b00000000b4967b8f792e0000b89a9c8e1cf87be7a8d0365b00000000c16a3ae3792e0000d27dbf811da17c7d3fcd365b000000004737f366792e000006e1449fed87c099ecc8365b00000000bfdfdfab792e00004626d1ce15cbdda03fc6365b00000000322f6e51792e00004d7bbed853bbc735f1c4365b000000004f88e72b792e0000fce57aa4d8e344c3bdbe365b00000000493769ad792e0000b40ef9fd5c9e9019dfbd365b00000000bb35079c792e00004626d1ce15cbdda0ecbb365b00000000be1e70b1792e00004f88c1c5ddc9bbf74fba365b00000000d18d317c792e0000660ba39a24ed035a87b9365b00000000bd1f9c5a792e00004626d1ce15cbdda068b9365b00000000ad11681e792e00001b3e23f175cdc07974aa365b000000004ed6ba52792e000018f8b756582cb1169ea9365b00000000b1c90433792e00004626d1ce15cbdda020a9365b000000005af141a4792e0000d965ecf89a7a95dc9da8365b00000000522461a8792e0000f07c8653d2be1c856da8365b0000000043465fcc792e0000e7b80b395a48a36b00a6365b000000004eb5d8f2792e0000399a1a8f2e25f82873a5365b000000001854ca26792e0000d4bb6fd9b68e950071a5365b000000005b8684c9792e000061decc7e6c15751192a4365b000000001823ae96792e0000fecb6ef2e9238e238fa3365b00000000050f264d792e0000db80682c6eef374d04a3365b00000000544a8de3792e0000fe6408119e2f03c07ea2365b0000000018b382e8792e0000a3ac2d4b2529a1ee05a1365b000000006dba16b8792e0000fad3611cccce3acb5b9e365b00000000babc3f27792e00005f78e198654c42a19d9a365b0000000097e1b040792e00001fdca4e63e99922f1199365b00000000467f6a06792e0000e40f2abe1062c4997398365b0000000023f01cea792e000091182b26ae456d5b8797365b00000000180946c5792e000092fdd683d25560bd7296365b00000000520bcad3792e000013e2f12e2dc557c96e3d345b000000006023ee92792e00002f1c0dca9b75c0a06e3d345b000000006c3d566c792e000019cd0f3bf94aea9f6e3d345b0000000044681b7a792e000043b62e8c44ef586c4a37345b000000002f9d7e03792e00006736a2509ae6a30fd727345b000000005e17c436792e0000b8969a94931a27313524345b00000000bef7a824792e000091426dfb4cdc212be1ee325b0000000068cf96fc792e0000def70196dbaa57ecdeee325b000000002e62cd39792e000080f8a3285d65265ddeee325b00000000bd466603792e0000d65d14246b8fb77375ee325b000000005ef8328e792e0000fa0b4fe33aaa82b771ed325b00000000321ee92f792e000082b45496c933cb043ced325b00000000415fcd71792e0000e7b80b395a48a36be3ea325b000000005515a83e792e0000cdff8ca792bcd6c687e3325b000000004b6b1a09792e00008be57e4d4648d7cf79e3325b000000004dafb9c6792e0000447fc4b184aa0c4bd9e0325b000000004cb571f4792e0000bd8e2ecd9a7d05b510d8325b00000000d9ad1397792e00004a286d0c74b049c082ce325b00000000")) Console.WriteLine("Failed to add local_peerlist_new");

                // Return serialized byte array
                return Storage.Serialize();
            }

            // Deseriaizes response data
            public Response Deserialize(byte[] Data)
            {
                // Deserialize data
                //Data = Encoding.DecompressByteArray(Data);
                return Encoding.DecodeObject<Response>(Data);

                // Populate and return new response
                /*return new Response
                {
                    
                };*/
            }
        }
    }
}
